<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Guitarists and Brands</title>
    <link rel="icon" type="image/png" href="http://www.hiltonparkband.com/wp-content/uploads/2018/09/cropped-guitar-favicon-300x300.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.css">
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.js"></script>

    <style>
        body{
            font-family:Arial, Helvetica, sans-serif;
            display:flex;
            justify-content:center;
            align-items:center;
            flex-direction:column;
        }

        input{
            margin:10px;
        }

        th{
            border: 1px solid black;
            background-color:lightblue;
        }

        td{
            border:1px solid black;
            padding:5px;
            
        }
    </style>
</head>
<body style="display:flex;justify-content:center;">
    <h2>Guitarists and guitar brands</h2>
    <p>To order by multiple columns, shift-click any subsequent columns</p>

    
    <table id="display">
        <thead>
            <th>
                Name
            </th>
            <th>
                Current band
            </th>
            <th>
                Endorsement
            </th>
        </thead>
    </table>
        <button onclick="create()">Create a new entry</button>
        <div hidden id="modal">
            <input name="nameInput" id="addInputName">
            <input name="bandInput" id="addInputBand">
            <input name="endInput" id="addInputEnd">
            
            <button onclick="addGuitarist()">Add</button>
        </div>
    <script>

        function create(){
            $('#modal').modal({
            });
        }
        function addGuitarist(){
            
            console.log("Adding guitarist");

            $.get(`/add/${$("#addInputName").val()}/${$("#addInputBand").val()}/${$("#addInputEnd").val()}`, function(result){
            })
            showData();
        }
        

    
        var dataArr = [];
    
        
        function showData(){
            $.get("/api/guitarist_brand", function(result) {
                for(var i = 0, len = result.data.length; i < len; i++){
                    dataArr.push([result.data[i].guitarist_name, result.data[i].current_band_name, result.data[i].brand_name])
                }
                console.log(result);
                $("#display").DataTable({
                    "aaData":dataArr
                });
            });  
        }
        showData();
        </script>

</body>
</html>